(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(95)},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(23),o=a.n(i),r=(a(39),a(27)),l=a(24),c=a(25),m=a(29),u=a(26),d=a(28),h=a(10),v=(a(41),a(43),a(14));a(91);var p=function(e){return n.a.createElement("div",{className:"right"===e.position?"message message--from-right":"message message--from-left"},!!e.label&&n.a.createElement("div",{className:"message__label"},e.label),n.a.createElement("div",{className:"message__content"},e.message),!!e.hasTail&&n.a.createElement("div",{className:"message__tail"},n.a.createElement("div",{className:"message__tail-background"}),n.a.createElement("div",{className:"message__tail-foreground"})),!!e.date&&n.a.createElement("div",{className:"message__date"},e.date))};var g=function(e){return n.a.createElement("div",{className:"conversation"},n.a.createElement("div",{className:"conversation__messages"},n.a.createElement("div",null,e.messageObjectList.map(function(e,t){return"string"===typeof e.message?n.a.createElement(p,{key:t,position:e.position||!1,label:e.label||!1,date:e.date||!1,message:e.message,hasTail:e.hasTail||!1}):!!n.a.isValidElement(e.message)&&e.message}))),n.a.createElement("div",{className:"conversation__input-container"},n.a.createElement(v.InputWithButton,{className:"conversation__input",onSubmit:e.onSubmit,placeholder:"Say something to Watson."})),n.a.createElement("div",{className:"conversation__disclaimer--message"},n.a.createElement("h6",{className:"base--h6"},"* This system is for demonstration purposes only and is not intended to process Personal Data. No Personal Data is to be entered into this system as it may not have the necessary controls in place to meet the requirements of the General Data Protection Regulation (EU) 2016/679.")))};a(93);var f=function(e){return n.a.createElement("div",{className:"result"},n.a.createElement("div",{className:"result__title"},e.title),n.a.createElement("div",{className:"result__preview"},e.preview),n.a.createElement("div",{className:"result__link"},n.a.createElement("a",{href:e.link,target:"_blank"},e.linkText)))},b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={context:{},messageObjectList:[],discoveryNumber:0},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a.callWatson("hello"),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"callWatson",value:function(e){var t=this,a=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,s=JSON.stringify({input:{text:e},context:this.state.context});return fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s}).then(function(e){if(!e.ok)throw e;return e.json()}).then(function(e){e.date=new Date,t.handleResponse(e)}).catch(function(e){throw e})}},{key:"handleResponse",value:function(e){if(e.hasOwnProperty("output")&&e.output.hasOwnProperty("action")&&e.output.action.hasOwnProperty("call_discovery"))this.addMessage({label:"Discovery Result:",message:"Great question. Here's what I found:",date:(new Date).toLocaleTimeString()}),this.formatDiscovery(e.output.discoveryResults);else{var t=e.output.text.filter(function(e){return e}).join("\n"),a=e.intents[0]?e.intents[0].intent:"",s=e.date.toLocaleTimeString(),n=e.context;this.setState({context:n});var i={position:"left",label:a,message:t,date:s,hasTail:!0};this.addMessage(i)}}},{key:"addMessage",value:function(e){this.setState({messageObjectList:Object(r.a)(this.state.messageObjectList).concat([e])})}},{key:"handleSubmit",value:function(e){var t=e.target.value,a={position:"right",message:t,date:(new Date).toLocaleTimeString(),hasTail:!0};this.addMessage(a),e.target.value="",this.callWatson(t)}},{key:"formatDiscovery",value:function(e){return e.map(function(e,t){var a=n.a.createElement(f,{key:"d"+this.state.discoveryNumber+t,title:e.title,preview:e.bodySnippet,link:e.sourceUrl,linkText:"See full manual entry"});this.addMessage({message:a})}.bind(this)),this.setState({discoveryNumber:this.state.discoveryNumber+1}),!0}},{key:"scrollToBottom",value:function(){var e=document.getElementsByClassName("conversation__messages")[0];e.scrollTop=e.scrollHeight}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){return n.a.createElement("div",{className:"app-wrapper"},n.a.createElement("p",{className:"conversation__intro"},"This demo shows how the Watson Assistant service calls the Discovery service when it does not know how to respond. The calls to Watson Assistant and Discovery are made in OpenWhisk, IBM's serverless platform."),n.a.createElement(g,{onSubmit:this.handleSubmit,messageObjectList:this.state.messageObjectList}))}}]),t}(s.Component);o.a.render(n.a.createElement(b,null),document.getElementById("root"))}},[[30,2,1]]]);
//# sourceMappingURL=main.6c6ea157.chunk.js.map